{"ast":null,"code":"import _slicedToArray from\"C:/Users/chris/OneDrive/Documentos/01 - Curso - SoyHenry/PI-Front-1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import axios from\"axios\";import{useState,useEffect}from'react';import style from'./actDetails.module.css';import Btns from'../buttons';import{Link}from'react-router-dom';import Select from'react-select';import{connect}from'react-redux';import{bindActionCreators}from'redux';import*as actionCreators from'../../actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ActDetails=function ActDetails(props){//   console.log(`/activities/${match.params.id}`);\nvar _useState=useState({}),_useState2=_slicedToArray(_useState,2),activity=_useState2[0],setActivity=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),paisesSeleccionados=_useState4[0],setPaisesSeleccionados=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),options=_useState6[0],setOptions=_useState6[1];// const [formData, setFormData] = useState({ });\nuseEffect(function(){//console.log(\"useEffect llamado\");\naxios.get(\"/activities/\".concat(props.match.params.id)).then(function(data){return setActivity(data.data);});},[paisesSeleccionados]);var deleteAct=function deleteAct(){//console.log(\"Activity\", props.match.params.id);\nvar id=props.match.params.id;axios.delete(\"/activities/\".concat(id)).then(function(){return alert('Delete successful');});document.querySelector('#btn1').click();};var saveCountriesHandler=function saveCountriesHandler(){var newCountriesList=[];newCountriesList=paisesSeleccionados.map(function(e){return e.value;});axios.put(\"activities/updatecountries/\".concat(props.match.params.id),{\"id\":newCountriesList}).then(function(res){return console.log(res);}).catch(function(e){return e;});setPaisesSeleccionados(newCountriesList);document.getElementById('btnCancel').click();};var addDelCountriesAct=function addDelCountriesAct(){var opciones=[];props.country.forEach(function(element){opciones.push({value:element.id,label:element.nombre});});setOptions(opciones);document.getElementById(\"divSelector\").hidden=false;document.getElementById(\"btnDel\").hidden=true;document.getElementById(\"btnAddDel\").hidden=true;var countriesSelected=[];activity.countries.forEach(function(element){countriesSelected.push({value:element.id,label:element.nombre});setPaisesSeleccionados(countriesSelected);});};var cancelHandler=function cancelHandler(){document.getElementById(\"divSelector\").hidden=true;document.getElementById(\"btnDel\").hidden=false;document.getElementById(\"btnAddDel\").hidden=false;};// console.log(\"paises seleccionados: \", paisesSeleccionados)\nreturn/*#__PURE__*/_jsxs(\"div\",{className:style.container,children:[/*#__PURE__*/_jsx(\"div\",{className:style.volver,children:/*#__PURE__*/_jsxs(Link,{to:\"/allactivities\",id:\"btn1\",children:[\" \",/*#__PURE__*/_jsx(Btns,{prop:\"Back\"})]})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h1\",{children:activity.nombre}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Difficult: \",/*#__PURE__*/_jsx(\"b\",{children:activity.dificultad})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Duration: \",/*#__PURE__*/_jsx(\"b\",{children:activity.duracion})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Seasson: \",/*#__PURE__*/_jsx(\"b\",{children:activity.temporada})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:style.volver,children:[/*#__PURE__*/_jsx(\"button\",{id:\"btnDel\",className:style.boton,onClick:deleteAct,children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{id:\"btnAddDel\",className:style.boton,onClick:addDelCountriesAct,children:\"Add/Del Countries\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"divSelector\",hidden:true,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Select / Delete countries\"}),/*#__PURE__*/_jsx(Select,{id:\"idSelect\",className:style.listado,value:paisesSeleccionados,options:options,isMulti:true,onChange:setPaisesSeleccionados}),/*#__PURE__*/_jsx(\"button\",{id:\"btnCancel\",className:style.boton,onClick:cancelHandler,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:style.boton,onClick:saveCountriesHandler,children:\"Save\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:style.container,children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Countries where you can perform \",activity.nombre]}),activity.countries?activity.countries.map(function(country){return/*#__PURE__*/_jsxs(Link,{to:\"/country/\".concat(country.id),children:[/*#__PURE__*/_jsx(\"h3\",{children:country.nombre}),/*#__PURE__*/_jsx(\"img\",{className:style.bandera,type:\"image/svg+xml\",alt:\"National flag\",src:country.bandera})]},country.nombre);}):/*#__PURE__*/_jsx(\"h2\",{children:\"No countries\"})]})]});};function mapStateToProps(state){return{country:state.country};}var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators(actionCreators,dispatch);};export default connect(mapStateToProps,mapDispatchToProps)(ActDetails);","map":{"version":3,"names":["React","axios","useState","useEffect","style","Btns","Link","Select","connect","bindActionCreators","actionCreators","ActDetails","props","activity","setActivity","paisesSeleccionados","setPaisesSeleccionados","options","setOptions","get","match","params","id","then","data","deleteAct","delete","alert","document","querySelector","click","saveCountriesHandler","newCountriesList","map","e","value","put","res","console","log","catch","getElementById","addDelCountriesAct","opciones","country","forEach","element","push","label","nombre","hidden","countriesSelected","countries","cancelHandler","container","volver","dificultad","duracion","temporada","boton","listado","bandera","mapStateToProps","state","mapDispatchToProps","dispatch"],"sources":["C:/Users/chris/OneDrive/Documentos/01 - Curso - SoyHenry/PI-Front-1/src/components/actDetails/index.jsx"],"sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { useState, useEffect } from 'react';\r\nimport style from './actDetails.module.css';\r\nimport Btns from '../buttons';\r\nimport { Link } from 'react-router-dom';\r\nimport Select from 'react-select';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport * as actionCreators from '../../actions';\r\n\r\nconst ActDetails= (props) =>{\r\n//   console.log(`/activities/${match.params.id}`);\r\n  \r\n  const [activity, setActivity] = useState({});\r\n  const [paisesSeleccionados, setPaisesSeleccionados] = useState([]);  \r\n  const [options, setOptions] = useState([]);\r\n  // const [formData, setFormData] = useState({ });\r\n \r\n     \r\n  useEffect(() => {\r\n      //console.log(\"useEffect llamado\");\r\n      axios.get(`/activities/${props.match.params.id}`)\r\n        .then(data => setActivity(data.data));\r\n  },[paisesSeleccionados]);\r\n\r\n  const deleteAct=()=>{\r\n       //console.log(\"Activity\", props.match.params.id);\r\n      let id=props.match.params.id\r\n      axios.delete(`/activities/${id}`)\r\n      .then(() => alert('Delete successful'));\r\n      document.querySelector('#btn1').click();\r\n  }\r\n\r\n\r\n  const saveCountriesHandler=()=>{\r\n\r\n    let newCountriesList=[];\r\n    newCountriesList = paisesSeleccionados.map((e)=>{\r\n    return e.value\r\n      })\r\n    axios.put(`activities/updatecountries/${props.match.params.id}`, {\r\n      \"id\": newCountriesList\r\n       })\r\n    .then((res)=> console.log(res))\r\n    .catch((e)=>e);\r\n    setPaisesSeleccionados(newCountriesList);\r\n   document.getElementById('btnCancel').click();\r\n}\r\n\r\nconst addDelCountriesAct=()=>{\r\n  let opciones = [];\r\n    props.country.forEach(element => {\r\n        opciones.push({ value: element.id, label: element.nombre })\r\n    })\r\n    setOptions(opciones);\r\n\r\n  document.getElementById(\"divSelector\").hidden=false;\r\n  document.getElementById(\"btnDel\").hidden= true;  \r\n  document.getElementById(\"btnAddDel\").hidden= true;\r\n\r\n  let countriesSelected=[];\r\n  activity.countries.forEach(element => {\r\n    countriesSelected.push({ value: element.id, label: element.nombre })\r\n    setPaisesSeleccionados(countriesSelected);\r\n      })\r\n\r\n}\r\n\r\nconst cancelHandler=()=>{\r\n     \r\n      document.getElementById(\"divSelector\").hidden=true;\r\n      document.getElementById(\"btnDel\").hidden= false;  \r\n      document.getElementById(\"btnAddDel\").hidden= false;\r\n \r\n    }\r\n   \r\n   // console.log(\"paises seleccionados: \", paisesSeleccionados)\r\n\r\n  return (\r\n    \r\n    <div className={style.container}>\r\n      <div className={style.volver}>\r\n        <Link to=\"/allactivities\" id=\"btn1\"> <Btns prop=\"Back\" /></Link>\r\n      </div>\r\n        \r\n         <hr></hr>\r\n        <h1>{activity.nombre}</h1>\r\n        <hr></hr>\r\n     \r\n        <p>Difficult: <b>{activity.dificultad}</b> \r\n        </p> \r\n\r\n        <p>Duration: <b>{activity.duracion}</b>\r\n                     \r\n        </p>\r\n        <p>Seasson: <b>{activity.temporada}</b>\r\n\r\n        \r\n        </p>\r\n        <hr></hr>\r\n        <div className={style.volver}>\r\n        <button id=\"btnDel\" className={style.boton} onClick={deleteAct}>Delete</button>\r\n        <button id=\"btnAddDel\" className={style.boton} onClick={addDelCountriesAct}>Add/Del Countries</button>\r\n        </div>\r\n        <div id=\"divSelector\" hidden>\r\n        <h2>Select / Delete countries</h2>\r\n\r\n                <Select id=\"idSelect\" className={style.listado} value={paisesSeleccionados} options={options} isMulti onChange={setPaisesSeleccionados} />\r\n                <button id=\"btnCancel\" className={style.boton} onClick={cancelHandler}>Cancel</button>\r\n                <button  className={style.boton} onClick={saveCountriesHandler}>Save</button>\r\n        </div>\r\n        <hr></hr>\r\n        <div className={style.container}>\r\n        <p>Countries where you can perform {activity.nombre}</p>\r\n        \r\n        {\r\n        activity.countries? activity.countries.map((country) => \r\n             \r\n                <Link key={country.nombre} to= {`/country/${country.id}`}>\r\n                    <h3>{country.nombre}</h3>\r\n                    <img className={style.bandera} type=\"image/svg+xml\" alt=\"National flag\" src={country.bandera} />\r\n                </Link>\r\n              \r\n            ) : <h2>No countries</h2>\r\n        }\r\n        \r\n        </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n      country: state.country,      \r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = function (dispatch) {\r\n  return bindActionCreators(actionCreators, dispatch)\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ActDetails)\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}